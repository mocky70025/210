# Render デプロイ詳細手順（完全無料・ステップバイステップ）

この手順に従えば、誰でもデプロイできます！

## 📋 事前準備

- GitHubアカウント（既にリポジトリ `reizoukunn-debug/210` にコードがある）
- メールアドレス（Renderのアカウント作成用）

---

## ステップ1: Renderアカウントを作成

### 1-1. Renderのサイトにアクセス

1. ブラウザで [https://render.com](https://render.com) を開く
2. 右上の「Get Started for Free」ボタンをクリック

### 1-2. GitHubアカウントでログイン

1. 「Sign up with GitHub」をクリック
2. GitHubの認証画面が開くので、「Authorize render」をクリック
3. 必要に応じて、GitHubのパスワードを入力

### 1-3. アカウント情報を入力（初回のみ）

1. メールアドレスを入力
2. 必要に応じて他の情報を入力
3. 「Complete Sign Up」をクリック

**✅ これでRenderのダッシュボードにアクセスできるようになりました！**

---

## ステップ2: 新しいWeb Serviceを作成

### 2-1. ダッシュボードを開く

1. Renderのダッシュボードが表示されます
2. 左上の「New +」ボタンをクリック
3. メニューから「Web Service」を選択

**💡 もし「New +」ボタンが見つからない場合：**
- 画面左上の「New」ボタンを探す
- または、ダッシュボードの「New Web Service」ボタンをクリック

---

## ステップ3: GitHubリポジトリを接続

### 3-1. リポジトリを選択

1. 「Connect a repository」セクションが表示されます
2. 「Configure account」または「Connect GitHub」をクリック
3. 必要に応じて、GitHubの認証を再度行う

### 3-2. リポジトリを検索・選択

1. 検索ボックスに `210` と入力
2. `reizoukunn-debug/210` が表示されるので、クリック
3. 「Connect」ボタンをクリック

**✅ リポジトリが接続されました！**

---

## ステップ4: サービス設定を入力

### 4-1. 基本設定

以下の項目を入力します：

| 項目 | 入力値 | 説明 |
|------|--------|------|
| **Name** | `minigame-backend` | 任意の名前（他の人と被らなければOK） |
| **Region** | `Singapore` または `Oregon` | アジアに近いリージョンを選択 |
| **Branch** | `main` | デフォルトのままでOK |

### 4-2. 重要：Root Directoryを設定

⚠️ **ここが重要です！**

1. 「Root Directory」の欄を見つける
2. 入力欄に **`server`** と入力
   - これにより、`server` フォルダ内のコードがデプロイされます

### 4-3. ビルド・起動コマンド

以下のコマンドを入力：

| 項目 | 入力値 |
|------|--------|
| **Runtime** | `Node` を選択（ドロップダウンから） |
| **Build Command** | `npm install && npm run build` |
| **Start Command** | `npm start` |

**💡 もしこれらの項目が見つからない場合：**
- 「Advanced」セクションを開く
- または、スクロールダウンして探す

---

## ステップ5: 環境変数を設定

### 5-1. Environment Variablesセクションを開く

1. 設定画面を下にスクロール
2. 「Environment Variables」セクションを見つける
3. 「Add Environment Variable」ボタンをクリック

### 5-2. 環境変数を追加

**1つ目の環境変数：**

1. **Key**: `FRONTEND_URL` と入力
2. **Value**: `http://localhost:5173` と入力（一時的）
3. 「Add」または「Save」をクリック

**2つ目の環境変数：**

1. 再度「Add Environment Variable」をクリック
2. **Key**: `PORT` と入力
3. **Value**: `10000` と入力
4. 「Add」または「Save」をクリック

**✅ 環境変数の設定が完了しました！**

---

## ステップ6: プランを選択

1. 「Plan」セクションを確認
2. **「Free」** が選択されていることを確認
3. もし有料プランが選択されている場合は、「Free」に変更

---

## ステップ7: デプロイを開始

### 7-1. デプロイボタンをクリック

1. 画面下部の「Create Web Service」ボタンをクリック
2. デプロイが自動的に開始されます

### 7-2. デプロイの進行を確認

1. ダッシュボードに戻ると、デプロイの進行状況が表示されます
2. 「Building...」→「Deploying...」→「Live」の順に進みます
3. 初回デプロイには **3〜5分** かかります

**💡 デプロイ中にできること：**
- 「Logs」タブをクリックして、ビルドログを確認できます
- エラーがあれば、ログに表示されます

---

## ステップ8: デプロイ完了を確認

### 8-1. URLを確認

1. デプロイが完了すると、「Live」と表示されます
2. 画面の上部にURLが表示されます：
   ```
   https://minigame-backend.onrender.com
   ```
   （実際のURLは異なる場合があります）

### 8-2. URLをメモ

**このURLをメモしてください！** 後でVercelの環境変数に設定します。

### 8-3. 動作確認（オプション）

1. ブラウザでURLにアクセス
2. 「Cannot GET /」と表示されれば正常です
   - これは、ルートパス（/）にAPIエンドポイントがないためです
   - Socket.IOは `/socket.io/` で動作するので、これで問題ありません

---

## ✅ デプロイ完了！

これでバックエンドのデプロイが完了しました！

## 📝 次のステップ

1. **Vercelでフロントエンドをデプロイ**（次の手順）
2. VercelのURLを取得したら、Renderの `FRONTEND_URL` を更新

---

## 🆘 トラブルシューティング

### デプロイが失敗する場合

1. **ログを確認**:
   - ダッシュボードでサービスを選択
   - 「Logs」タブをクリック
   - エラーメッセージを確認

2. **よくあるエラー**:
   - **Root Directoryが間違っている**: `server` になっているか確認
   - **Build Commandが間違っている**: `npm install && npm run build` になっているか確認
   - **Start Commandが間違っている**: `npm start` になっているか確認

### 環境変数が反映されない場合

- 環境変数を変更したら、自動的に再デプロイされます
- 再デプロイが完了するまで数分かかります

### アプリがスリープしている場合

- 15分間アクセスがないとスリープします
- 次回アクセス時に自動的に復帰します（30秒程度かかります）
- これは無料プランの制限です

---

## 📞 まだわからない場合

1. Renderのログを確認（「Logs」タブ）
2. エラーメッセージをコピーして、再度質問してください

